# 요구사항 명세서

## 브랜드 & 상품 요구사항

### 1. 시나리오

회원은 특정 브랜드의 상품 목록을 최신순으로 조회할 수 있다.

### 1. 기능 명세

목적:

회원은 원하는 조건(브랜드, 정렬 기준)으로 상품 목록을 필터링하여 조회할 수 있다.

Actor: 일반 사용자 (고객)

주요 시나리오:

- 사용자가 특정 브랜드와 최신순 정렬 옵션을 선택하여 상품 목록 조회를 요청한다
- 시스템은 해당 브랜드의 상품들을 최신순으로 정렬하여 반환한다
- 화면은 조회된 상품 목록을 표시한다

시스템 동작:

- 요청 파라미터의 유효성을 검증한다
    - 파라미터 목록: 브랜드 ID, 정렬 기준, 페이지 정보
- DB 에서 해당 브랜드 ID와 일치하고 최신순으로 정렬된 상품 목록을 조회한다
- 각 상품의 총 좋아요 수를 함께 조회한다
- 조회된 상품 목록과 각각의 총 좋아요 수와 페이징 정보를 응답으로 반환한다

예외:

- 존재하지 않는 브랜드 ID로 요청 시: 404 Not Found
- 페이지 번호 및 페이지 크기가 유효하지 않은 값일 경우: 400 Bad Request
- 정렬 기준이 유효하지 않은 값일 경우: 400 Bad Request

체크 리스트:

- 브랜드 필터링이 정확하게 동작하는가
- 정렬 기준이 각각 정확하게 동작하는가
    - 제공하는 정렬 기준: 최신순, 가격순, 좋아요순
- 페이징 처리가 정확하게 동작하는가
    - 페이지 번호의 기본 값 = 0, 페이지 당 상품 수 기본 값 = 20

### 2. 시나리오

회원은 특정 브랜드의 상세 정보를 조회할 수 있다.

### 2. 기능 명세

목적: 회원은 특정 브랜드의 상세 정보를 확인하여 해당 브랜드에 대한 이해를 높일 수 있다.

Actor: 일반 사용자 (고객)

주요 시나리오:

- 사용자가 특정 브랜드의 상세 정보 조회를 요청한다.
- 시스템은 해당 브랜드의 상세 정보를 반환한다.
- 화면은 조회된 브랜드 정보를 표시한다.

시스템 동작:

- 요청된 브랜드 ID의 유효성을 검증한다.
- DB에서 해당 ID의 브랜드 정보를 조회한다.
- 조회된 브랜드 정보를 응답으로 반환한다.

예외:

- 존재하지 않는 브랜드 ID로 요청 시: 404 Not Found

체크리스트:

- 요청한 브랜드 ID에 해당하는 정보가 정확하게 조회되는가
- 존재하지 않는 브랜드 ID 요청 시 404 응답을 반환하는가
- 응답 형식이 명세에 맞게 제공되는가

### 3. 시나리오

회원은 특정 상품의 상세 정보를 조회할 수 있다.

### 3. 기능 명세

목적: 회원은 특정 상품의 상세 정보를 확인하여 구매 결정을 내리거나 상품에 대한 이해를 높일 수 있다.

Actor: 일반 사용자 (고객)

주요 시나리오:

- 사용자가 특정 상품의 상세 정보 조회를 요청한다.
- 시스템은 해당 상품의 상세 정보와 총 좋아요 수를 반환한다.
- 화면은 조회된 상품 정보를 표시한다.

시스템 동작:

- 요청된 상품 ID의 유효성을 검증한다.
- DB에서 해당 ID의 상품 정보를 조회한다.
- 해당 상품의 총 좋아요 수를 함께 조회한다.
- 조회된 상품 정보와 총 좋아요 수를 응답으로 반환한다.

예외:

- 존재하지 않는 상품 ID로 요청 시: 404 Not Found

체크리스트:

- 요청한 상품 ID에 해당하는 정보가 정확하게 조회되는가
- 요청한 상품의 총 좋아요 수가 정확하게 조회되는가
- 존재하지 않는 상품 ID 요청 시 404 응답을 반환하는가
- 응답 형식이 명세에 맞게 제공되는가

## 좋아요 (Likes) 요구사항

### 1. 시나리오

회원은 마음에 드는 특정 상품에 '좋아요'를 표시할 수 있다.

### 1. 기능 명세

목적:

- 회원은 선호하는 상품을 표시하여 개인화된 경험을 얻고, 다른 사용자에게 상품의 인기도를 보여줄 수 있다.
- 이 기능은 멱등성을 보장하여야 한다 (한 상품에 중복 '좋아요' 불가).

Actor: 일반 사용자 (고객)

주요 시나리오:

- 사용자가 특정 상품에 '좋아요' 등록을 요청한다.
- 시스템은 해당 상품에 대한 사용자의 '좋아요' 정보를 저장한다.
- 시스템은 처리 성공을 응답한다.
- 화면은 해당 상품에 대한 '좋아요' 활성 상태를 표시한다

시스템 동작:

- 요청된 상품 ID의 유효성을 검증한다.
- 사용자 인증 정보를 확인한다.
- DB에서 해당 사용자가 이미 해당 상품에 '좋아요'를 눌렀는지 확인한다.
- '좋아요' 이력이 없다면, DB에 '좋아요' 정보를 저장한다.
- 성공적으로 처리되었음을 응답한다.

예외:

- 존재하지 않는 상품 ID로 요청 시: 404 Not Found
- 인증되지 않은 사용자의 요청 시: 401 Unauthorized

체크리스트:

- 특정 상품에 '좋아요'가 정상적으로 등록되는가?
- 한 사용자가 동일한 상품에 중복으로 '좋아요'를 등록할 수 없는가? (멱등성)
- 존재하지 않는 상품 ID 요청 시 404 응답을 반환하는가?
- 로그인하지 않은 사용자 요청 시 401 응답을 반환하는가?

### 2. 시나리오

회원은 '좋아요'를 표시했던 상품의 '좋아요'를 취소할 수 있다.

### 2. 기능 명세

목적:

- 회원은 이전에 '좋아요'를 표시했던 상품에 대한 의사를 철회할 수 있다.
- 이 기능은 멱등성을 보장하여야 한다 (취소된 '좋아요'를 다시 취소해도 상태는 동일).

Actor: 일반 사용자 (고객)

주요 시나리오:

- 사용자가 특정 상품에 '좋아요' 취소를 요청한다.
- 시스템은 해당 상품에 대한 사용자의 '좋아요' 정보를 삭제한다.
- 시스템은 처리 성공을 응답한다.
- 화면은 해당 상품에 대한 '좋아요' 비활성 상태를 표시한다.

시스템 동작:

- 요청된 상품 ID의 유효성을 검증한다.
- 사용자 인증 정보를 확인한다.
- DB에서 해당 사용자가 해당 상품에 '좋아요'를 눌렀는지 확인한다.
- '좋아요' 이력이 있다면, DB에서 '좋아요' 정보를 삭제한다.
- 성공적으로 처리되었음을 응답한다.

예외:

- 존재하지 않는 상품 ID로 요청 시: 404 Not Found
- 인증되지 않은 사용자의 요청 시: 401 Unauthorized

체크리스트:

- 특정 상품에 대한 '좋아요'가 정상적으로 취소되는가?
- 한 사용자가 동일한 상품에 '좋아요' 취소를 중복으로 요청해도 시스템이 오류 없이 처리하는가? (멱등성)
- 존재하지 않는 상품 ID 요청 시 404 응답을 반환하는가?
- 로그인하지 않은 사용자 요청 시 401 응답을 반환하는가?

### 3. 시나리오

회원은 자신이 '좋아요'를 표시한 상품들의 목록을 조회할 수 있다.

### 3. 기능 명세

목적: 회원은 자신이 '좋아요'를 표시한 상품들을 모아서 보고 관리할 수 있다.

Actor: 일반 사용자 (고객)

주요 시나리오:

- 사용자가 '좋아요'한 상품 목록 조회를 요청한다.
- 시스템은 해당 사용자가 '좋아요'한 상품 목록을 반환한다.
- 화면은 조회된 상품 목록을 표시한다.

시스템 동작:

- 사용자 인증 정보를 확인한다.
- 요청 파라미터의 유효성을 검증한다 (페이지 정보).
- DB에서 해당 사용자가 '좋아요'를 누른 상품 목록을 조회한다.
- 조회된 상품 목록과 페이징 정보를 응답으로 반환한다.

예외:

- 인증되지 않은 사용자의 요청 시: 401 Unauthorized
- '좋아요'한 상품이 하나도 없을 경우: 빈 목록([])을 반환한다.

체크리스트:

- 로그인한 사용자가 '좋아요'한 상품 목록만 정확하게 조회되는가?
- 페이징 처리가 정확하게 동작하는가?
- 로그인하지 않은 사용자 요청 시 401 응답을 반환하는가?
- 응답 형식이 명세에 맞게 제공되는가?

## 주문 & 결제 요구사항

### 1. 시나리오

회원은 원하는 상품을 주문할 수 있다.

### 1. 기능 명세

목적: 회원은 상품을 구매하기 위해 주문을 요청하고, 시스템은 재고와 포인트를 처리한 후 주문을 확정한다.

Actor: 일반 사용자 (고객)

주요 시나리오:

- 사용자가 상품들에 대한 주문을 요청한다.
- 시스템은 상품 별 재고와 사용자 포인트를 확인하고 차감한다.
- 시스템은 주문 정보를 생성하고 외부 시스템에 전송한다.
- 시스템은 주문 처리 완료를 응답한다.
- 화면은 완료된 주문 정보를 표시한다.

시스템 동작:

- 사용자 인증 정보를 확인한다.
- 요청된 상품 별 ID, 수량, 사용할 포인트의 유효성을 검증한다.
- DB에서 상품 정보를 조회하고, 재고가 충분한지 확인한다.
- DB에서 사용자 정보를 조회하고, 포인트가 충분한지 확인한다.
- 상품 재고를 차감한다.
- 사용자 포인트를 차감한다.
- 주문 정보를 DB에 저장한다.
- 주문 정보를 외부 시스템(예: 배송 시스템)에 전송한다.
- 성공적으로 처리되었음을 응답한다.

예외:

- 인증되지 않은 사용자의 요청 시: 401 Unauthorized
- 존재하지 않는 상품 ID로 요청 시: 404 Not Found
- 상품 재고가 부족할 경우: 409 Conflict
- 사용자 포인트가 부족할 경우: 409 Conflict
- 외부 시스템 전송 실패 시: 주문 관련 트랜잭션(재고, 포인트 차감)을 롤백하고 500 Internal Server Error 응답

체크리스트:

- 상품 재고가 정상적으로 확인되고 차감되는가?
- 사용자 포인트가 정상적으로 확인되고 차감되는가?
- 주문 정보가 외부 시스템으로 정확하게 전송되는가?
- 재고 부족, 포인트 부족 등 예외 상황에서 주문이 생성되지 않고 적절한 응답을 반환하는가?
- 주문 처리 과정 중 하나라도 실패할 경우, 이전 작업(재고, 포인트 차감 등)이 모두 롤백되는가?
- 인증되지 않은 사용자 요청 시 401 응답을 반환하는가?

### 2. 시나리오

회원은 자신의 주문 내역 목록을 조회할 수 있다.

### 2. 기능 명세

목적: 회원은 자신의 과거 주문 내역을 확인하고 관리할 수 있다.

Actor: 일반 사용자 (고객)

주요 시나리오:

- 사용자가 자신의 주문 목록 조회를 요청한다.
- 시스템은 해당 사용자의 주문 목록을 반환한다.
- 화면은 조회된 주문 목록을 표시한다.

시스템 동작:

- 사용자 인증 정보를 확인한다.
- 요청 파라미터의 유효성을 검증한다 (페이지 정보).
- DB에서 해당 사용자의 주문 목록을 최신순으로 조회한다.
- 조회된 주문 목록과 페이징 정보를 응답으로 반환한다.

예외:

- 인증되지 않은 사용자의 요청 시: 401 Unauthorized
- 주문 내역이 하나도 없을 경우: 빈 목록([])을 반환한다.

체크리스트:

- 로그인한 사용자의 주문 목록만 정확하게 조회되는가?
- 페이징 처리가 정확하게 동작하는가?
- 로그인하지 않은 사용자 요청 시 401 응답을 반환하는가?
- 응답 형식이 명세에 맞게 제공되는가?

### 3. 시나리오

회원은 자신의 특정 주문 건에 대한 상세 내역을 조회할 수 있다.

### 3. 기능 명세

목적: 회원은 특정 주문의 상세 정보(주문 상품, 결제 금액 등)를 확인하여 주문 상태를 파악하고 관리할 수 있다.

Actor: 일반 사용자 (고객)

주요 시나리오:

- 사용자가 특정 주문의 상세 조회를 요청한다.
- 시스템은 해당 주문의 상세 정보를 반환한다.
- 화면은 조회된 주문 상세 정보를 표시한다.

시스템 동작:

- 사용자 인증 정보를 확인한다.
- 요청된 주문 ID의 유효성을 검증한다.
- DB에서 해당 주문 ID의 상세 정보를 조회한다.
- 해당 주문이 현재 로그인한 사용자의 주문인지 확인한다.
- 조회된 주문 상세 정보를 응답으로 반환한다.

예외:

- 인증되지 않은 사용자의 요청 시: 401 Unauthorized
- 존재하지 않는 주문 ID로 요청 시: 404 Not Found
- 자신의 주문이 아닌 다른 사용자의 주문 조회를 시도할 경우: 403 Forbidden

체크리스트:

- 요청한 주문 ID에 해당하는 상세 정보가 정확하게 조회되는가?
- 로그인한 사용자가 자신의 주문만 조회할 수 있는가?
- 존재하지 않는 주문 ID 요청 시 404 응답을 반환하는가?
- 인증되지 않은 사용자 요청 시 401 응답을 반환하는가?
- 응답 형식이 명세에 맞게 제공되는가?